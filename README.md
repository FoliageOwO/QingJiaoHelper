# QingJiaoHelper

青骄第二课堂小助手: 自动完成所有课程 + 每日领取学分

## 插件地址

+ [Greasy Fork - QingJiaoHelper](https://greasyfork.org/zh-CN/scripts/452984-qingjiaohelper)
+ [GitHub - WindLeaf233/QingJiaoHelper](https://github.com/WindLeaf233/QingJiaoHelper/)

## 食用方法

1. 安装这个脚本
2. 选择一个方法激活功能 (见下面 **激活方法**)
3. 所有的调试日志都在 devtools 控制台中, 成功/失败的消息会在右上角提示

## 激活方法
* 手动跳转到对应的网址来激活对应功能
  + https://www.2-class.com/courses - 自动完成所有课程 (不包括期末考试)
  + https://www.2-class.com/selfCourse - 自动完成所有**自学**课程 (不包括考试)
  + https://www.2-class.com/admin/creditCenter - 自动获取所有可以获取的学分, 包括 `心理减压, 耕读学堂, 校园安全` 等等
  + **注意: 你可以自定义开关对应功能 (点击油猴脚本图标 -> fuck_qingjiao -> 菜单 -> 功能开关), 关闭后当你访问就不会激活!**
* 一键完成 + 领取学分
  + 点击油猴脚本图标 -> fuck_qingjiao -> 菜单 -> 其他 -> 一键完成

## 常见问题解答

+ **是否支持批量导入账号并批量完成**

目前版本还未实现, 由于青骄第二课堂更新了 `nvc` 无痕验证 (具体见 [阿里云验证码功能概述](https://help.aliyun.com/document_detail/122071.html)), 每次调用 `api` 时都需要多传一个 `nvcVal` 参数, 而这个参数不好拿到, 所以就登录不了

*我正在尝试使用别的方法登录*

+ **支持知识竞赛/期末考试吗**

不支持, 我们学校不让我们做这个, 所以我没有账号测试

+ **为什么装了脚本之后, 页面布局变得很奇怪**

这个菜单我写的比较仓促, 所以偷了一下懒, 我使用了 `vue + buefy` 作为菜单页面, 但是 `buefy` 的 css 和青骄本身的 css 冲突, 就出现了这个问题

*我会尽快使用别的库来重写菜单*

## TODOs

+ [x] 优化日志
+ [x] 优化代码, 实现高复用
+ [x] 添加 UI 界面, 控制功能开关
+ [ ] 支持批量导入账号, 实现全自动批量完成课程
+ [ ] 点赞失败后会先尝试取消赞, 再进行点赞
+ [ ] 重写菜单, 修复 css 冲突
+ [ ] 实现登录 (批量导入)
+ [ ] 设置完成自定义范围/数量的课程和手动完成课程

## 更新日志

#### v0.2.6
* [*] 更换脚本名字

#### v0.2.5
* [+] 添加菜单
* [+] 添加开关功能
* [+] 添加一键完成
* [+] 添加 `ToastifyJs` 来显示消息
* [!] 修复 `request` 函数无限递归的 bug
* [!] 修复 `request` 函数的 `method` 不匹配问题
* [.] 简化代码, 提取公共函数

#### v0.2
* [+] 添加 `耕读学堂` 的子分类的解析 (耕读, 电影, 音乐, 体育, 美术, 自然, 公开课)
* [+] 添加日志输出获取资源的结果
* [+] 添加日志输出完成课程的数量
* [*] 使用中文日志

#### v0.1
* [.] 第一个版本, 添加基础功能